identity: tutorial
metadata:
  status: under development
  createdBy: Bob
  approvedBy: Alice
policy:
  mainPolicyId: http://axiomatics.com/alfa/identifier/demo.allowAll
  xacmlSpecifications:
  - <?xml version="1.0" encoding="UTF-8"?><!--This was generated by the ALFA Plugin for Eclipse from Axiomatics AB (http://www.axiomatics.com).--><!--Any modification to this file will be lost upon recompilation of the source ALFA file--><xacml3:Policy xmlns:xacml3="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17" PolicyId="http://axiomatics.com/alfa/identifier/demo.allowAll" RuleCombiningAlgId="urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:first-applicable" Version="1.0"><xacml3:Description/><xacml3:PolicyDefaults><xacml3:XPathVersion>http://www.w3.org/TR/1999/REC-xpath-19991116</xacml3:XPathVersion></xacml3:PolicyDefaults><xacml3:Target/><xacml3:Rule Effect="Deny" RuleId="demo.allowAll.allow"><xacml3:Description/><xacml3:Target/></xacml3:Rule></xacml3:Policy>
attributes:
  action.actionId:
    xacmlId: action.actionId
    category: Action
    datatype: string
  object.objectType:
    xacmlId: object.objectType
    category: Resource
    datatype: string
  record.department:
    xacmlId: record.department
    category: Resource
    datatype: string
  record.recordId:
    xacmlId: record.recordId
    category: Resource
    datatype: string
  record.name:
    xacmlId: record.name
    category: Resource
    datatype: string
  records.json:
    xacmlId: records.json
    category: Resource
    datatype: string
  record.owner:
    xacmlId: record.owner
    category: Resource
    datatype: string
  record.status:
    xacmlId: record.status
    category: Resource
    datatype: string
  user.employeeId:
    xacmlId: user.employeeId
    category: AccessSubject
    datatype: string
  users.json:
    xacmlId: users.json
    category: AccessSubject
    datatype: string
  user.subordinate:
    xacmlId: user.subordinate
    category: AccessSubject
    datatype: string
  user.role:
    xacmlId: user.role
    category: AccessSubject
    datatype: string
  user.name:
    xacmlId: user.name
    category: AccessSubject
    datatype: string
  user.department:
    xacmlId: user.department
    category: AccessSubject
    datatype: string
attributeConnectors:
  GithubUsers:
    className: com.axiomatics.attributeconnector.http.ConnectorModule
    provides:
    - users.json
    configurationString: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><configuration xmlns=\"http://www.axiomatics.com/http.config\" identifier=\"demoUserJson\"><connection><url>https://davidjbrossard.github.io/pdp-demo/data/users.json</url><method>GET</method></connection><mapping><xacmlAttribute Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" AttributeId=\"users.json\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" Issuer=\"\"/><contentType>application/json</contentType></mapping></configuration>"
  ParserUsers:
    className: com.axiomatics.attributeconnector.parser.json.ConnectorModule
    provides:
    - user.department
    - user.role
    configurationString: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><configuration xmlns=\"http://www.axiomatics.com/attributeconnector/parser/json/configuration\" identifier=\"demoUserParser\"><source><xacmlAttribute AttributeId=\"users.json\" Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" /></source><mapping><xacmlAttribute AttributeId=\"user.role\" Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" /><jsonPath>$.[?(@.name == '##1##')].role</jsonPath><key><xacmlAttribute AttributeId=\"user.name\" Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" DataType=\"http://www.w3.org/2001/XMLSchema#string\"/></key></mapping><mapping><xacmlAttribute AttributeId=\"user.department\" Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" /><jsonPath>$.[?(@.name == '##1##')].department</jsonPath><key><xacmlAttribute AttributeId=\"user.name\" Category=\"urn:oasis:names:tc:xacml:1.0:subject-category:access-subject\" DataType=\"http://www.w3.org/2001/XMLSchema#string\"/></key></mapping></configuration>"
  GithubRecords:
    className: com.axiomatics.attributeconnector.parser.json.ConnectorModule
    provides:
    - records.json
    configurationString: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><configuration xmlns=\"http://www.axiomatics.com/http.config\" identifier=\"aadRecipientPayload\"><connection><url>https://davidjbrossard.github.io/pdp-demo/data/records.json</url><method>GET</method></connection><mapping><xacmlAttribute Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" AttributeId=\"records.json\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" Issuer=\"\"/><contentType>application/json</contentType></mapping></configuration>"
  ParserRecords:
    className: com.axiomatics.attributeconnector.parser.json.ConnectorModule
    provides:
    - record.department
    - record.name
    configurationString: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><configuration xmlns=\"http://www.axiomatics.com/attributeconnector/parser/json/configuration\" identifier=\"records.parser\"><source><xacmlAttribute AttributeId=\"records.json\" Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" /></source><mapping><xacmlAttribute AttributeId=\"record.department\" Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" /><jsonPath>$.[?(@.id==##1##)].department</jsonPath><key><xacmlAttribute Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" AttributeId=\"records.id\" DataType=\"http://www.w3.org/2001/XMLSchema#string\"/></key></mapping><mapping><xacmlAttribute AttributeId=\"record.name\" Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" DataType=\"http://www.w3.org/2001/XMLSchema#string\" /><jsonPath>$.[?(@.id==####)].name</jsonPath><key><xacmlAttribute Category=\"urn:oasis:names:tc:xacml:3.0:attribute-category:resource\" AttributeId=\"records.id\" DataType=\"http://www.w3.org/2001/XMLSchema#string\"/></key></mapping></configuration>"