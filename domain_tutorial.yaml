identity: tutorial
metadata:
  status: under development
  createdBy: Bob
  approvedBy: Alice
policy:
  mainPolicyId: http://axiomatics.com/alfa/identifier/demo.allowAll
  xacmlSpecifications:
  - <?xml version="1.0" encoding="UTF-8"?><!--This was generated by the ALFA Plugin for Eclipse from Axiomatics AB (http://www.axiomatics.com).--><!--Any modification to this file will be lost upon recompilation of the source ALFA file--><xacml3:Policy xmlns:xacml3="urn:oasis:names:tc:xacml:3.0:core:schema:wd-17" PolicyId="http://axiomatics.com/alfa/identifier/demo.allowAll" RuleCombiningAlgId="urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:first-applicable" Version="1.0"><xacml3:Description/><xacml3:PolicyDefaults><xacml3:XPathVersion>http://www.w3.org/TR/1999/REC-xpath-19991116</xacml3:XPathVersion></xacml3:PolicyDefaults><xacml3:Target/><xacml3:Rule Effect="Permit" RuleId="demo.allowAll.allow"><xacml3:Description/><xacml3:Target/></xacml3:Rule></xacml3:Policy>
attributes:
  action.actionId:
    xacmlId: action.actionId
    category: Action
    datatype: string
  object.objectType:
    xacmlId: object.objectType
    category: Resource
    datatype: string
  record.department:
    xacmlId: record.department
    category: Resource
    datatype: string
  record.recordId:
    xacmlId: record.recordId
    category: Resource
    datatype: string
  record.owner:
    xacmlId: record.owner
    category: Resource
    datatype: string
  record.status:
    xacmlId: record.status
    category: Resource
    datatype: string
  user.employeeId:
    xacmlId: user.employeeId
    category: AccessSubject
    datatype: string
  user.subordinate:
    xacmlId: user.subordinate
    category: AccessSubject
    datatype: string
  user.role:
    xacmlId: user.role
    category: AccessSubject
    datatype: string
  user.department:
    xacmlId: user.department
    category: AccessSubject
    datatype: string
attributeConnectors:
  allDataDB:
    className: com.axiomatics.acs.plugin.pips.table.TablePipModule
    provides:
    - record.department
    - record.owner
    - record.status
    - user.subordinate
    - user.role
    - user.department
    configurationString: |
      <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
      <configuration xmlns="http://www.axiomatics.com/table.config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="">
          <connnection>
              <url>jdbc:h2:mem:tutorial;INIT=RUNSCRIPT FROM '../data/allData.sql';user=axiomatics;password=Attributes</url>
              <driver>org.h2.Driver</driver>
          </connnection>
          <mapping isSingleValued="false">
              <xacmlAttribute Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource" AttributeId="record.department" DataType="http://www.w3.org/2001/XMLSchema#string"/>
              <tableName>records</tableName>
              <columnName>department</columnName>
              <key allowMultiple="false">
                  <xacmlAttribute Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource" AttributeId="record.recordId" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <columnName>recordid</columnName>
              </key>
          </mapping>
          <mapping isSingleValued="false">
              <xacmlAttribute Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" AttributeId="user.department" DataType="http://www.w3.org/2001/XMLSchema#string"/>
              <tableName>departments</tableName>
              <columnName>department</columnName>
              <key allowMultiple="false">
                  <xacmlAttribute Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" AttributeId="user.employeeId" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <columnName>username</columnName>
              </key>
          </mapping>
          <mapping isSingleValued="false">
              <xacmlAttribute Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" AttributeId="user.role" DataType="http://www.w3.org/2001/XMLSchema#string"/>
              <tableName>roles</tableName>
              <columnName>role</columnName>
              <key allowMultiple="false">
                  <xacmlAttribute Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" AttributeId="user.employeeId" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <columnName>username</columnName>
              </key>
          </mapping>
          <mapping isSingleValued="false">
              <xacmlAttribute Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" AttributeId="user.subordinate" DataType="http://www.w3.org/2001/XMLSchema#string"/>
              <tableName>subordinates</tableName>
              <columnName>subordinate</columnName>
              <key allowMultiple="false">
                  <xacmlAttribute Category="urn:oasis:names:tc:xacml:1.0:subject-category:access-subject" AttributeId="user.employeeId" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <columnName>manager</columnName>
              </key>
          </mapping>
          <mapping isSingleValued="false">
              <xacmlAttribute Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource" AttributeId="record.owner" DataType="http://www.w3.org/2001/XMLSchema#string"/>
              <tableName>records</tableName>
              <columnName>owner</columnName>
              <key allowMultiple="false">
                  <xacmlAttribute Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource" AttributeId="record.recordId" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <columnName>recordid</columnName>
              </key>
          </mapping>
          <mapping isSingleValued="false">
              <xacmlAttribute Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource" AttributeId="record.status" DataType="http://www.w3.org/2001/XMLSchema#string"/>
              <tableName>records</tableName>
              <columnName>status</columnName>
              <key allowMultiple="false">
                  <xacmlAttribute Category="urn:oasis:names:tc:xacml:3.0:attribute-category:resource" AttributeId="record.recordId" DataType="http://www.w3.org/2001/XMLSchema#string"/>
                  <columnName>recordid</columnName>
              </key>
          </mapping>
      </configuration>
attributeCache:
  user.role:
    timeToLive: 30 seconds
    maxItems: 1000
decisionParameters:
  partialEvaluationThreshold: 3
